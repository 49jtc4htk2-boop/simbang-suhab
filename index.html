<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>삼일 당일 최종 대면보고 자동완성</title>
<style>
 body {
   font-family: Arial, sans-serif;
   padding: 20px;
 }
 textarea {
   width: 100%;
   height: 220px;
 }
 button {
   padding: 8px 14px;
   margin: 6px 4px 6px 0;
   cursor: pointer;
 }
 pre {
   background: #f9f9f9;
   border: 1px solid #ccc;
   padding: 12px;
   min-height: 160px;
   white-space: pre-wrap;
 }
</style>
</head>
<body>

<h2>⚡️ 삼일 당일 최종 대면보고 자동 계산</h2>

<textarea id="input" placeholder="보고 원문 전체를 그대로 붙여넣으세요"></textarea>
<br>
<button onclick="process()">결과 보기</button>
<button onclick="copyResult()">복사하기</button>

<h3>✅ 결과</h3>
<pre id="output"></pre>

<script>
function process() {
  const text = document.getElementById("input").value;
  const lines = text.split("\n");

  let result = [];
  let totalPeople = 0;
  let totalSum = 0;

  lines.forEach(line => {
    if (!line.match(/^\d+\//)) return;

    const nums = line.match(/\d+/g);
    if (!nums || nums.length < 9) return;

    const area = nums[0];
    const people = Number(nums[1]);
    const counts = nums.slice(2, 9).map(Number);

    const sum = counts.reduce((a, b) => a + b, 0);
    const rate = people ? ((sum / people) * 100).toFixed(1) : "0.0";

    totalPeople += people;
    totalSum += sum;

    result.push(
      `${area}/${people}/${counts.join("/")}//${sum}(${rate}%)`
    );
  });

  const totalRate =
    totalPeople ? ((totalSum / totalPeople) * 100).toFixed(1) : "0.0";

  result.push(`종합/${totalPeople}//${totalSum}(${totalRate}%)`);

  document.getElementById("output").innerText = result.join("\n");
}

function copyResult() {
  const text = document.getElementById("output").innerText;
  if (!text) {
    alert("복사할 결과가 없습니다.");
    return;
  }
  navigator.clipboard.writeText(text).then(() => {
    alert("✅ 결과가 복사되었습니다!");
  });
}
</script>

</body>
</html>
